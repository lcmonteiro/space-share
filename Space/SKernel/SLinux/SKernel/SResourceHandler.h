/**
 * ------------------------------------------------------------------------------------------------ 
 * File:   SResourceHandler.h
 * Author: Luis Monteiro
 *
 * Created on January  2, 2019, 22:00 PM
 * ------------------------------------------------------------------------------------------------
 */
#ifndef SRESOURCEHANDLER_H
#define SRESOURCEHANDLER_H
/**
 * linux
 */
#include <unistd.h>
/**
 * std
 */
#include <chrono>
#include <system_error>
/**
 * space
 */
#include "SResource.h"
/**
 * ------------------------------------------------------------------------------------------------
 * Linux Resource
 * ------------------------------------------------------------------------------------------------
 */
class SResourceHandler : public SResource::SHandler {
public:
    /**
     * ------------------------------------------------------------------------
     * Constructors / Destructor
     * ------------------------------------------------------------------------
     */
    SResourceHandler(int h) : __fd(h) {
        if (__fd < 0) {
            throw ResourceException(std::make_error_code(std::errc(errno)));
        }
    }
    /**
     */
    virtual ~SResourceHandler() {
        if (__fd >= 0) {
            ::close(__fd);
        }   
    }
    /**
     * ------------------------------------------------------------------------
     * Interface
     * ------------------------------------------------------------------------
     * file descriptor
     */
    inline int fd() {
        return __fd;
    }
private:
    /**
     * ------------------------------------------------------------------------
     * Variables
     * ------------------------------------------------------------------------
     * file descriptor
     */
    int __fd;
};
/**
 * ------------------------------------------------------------------------------------------------
 * End
 * ------------------------------------------------------------------------------------------------
 */
#endif /* SRESOURCEHANDLER_H */