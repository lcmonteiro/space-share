/**
 * ------------------------------------------------------------------------------------------------ 
 * File:   SODirConnector.h
 * Author: Luis Monteiro
 *
 * Created on November 26, 2015, 12:37 PM
 * ------------------------------------------------------------------------------------------------
 */
#ifndef SODIRSTREAMSOCKET_H
#define SODIRSTREAMSOCKET_H
/**
 * space
 */
#include "SDirectoryResource.h"
#include "SFileResource.h"
/**
 * share 
 */
#include "SBuffer.h"
#include "SDocument.h"
#include "SConnector.h"
/**
 * ------------------------------------------------------------------------------------------------
 * Begin namespace Decoded and Message
 * ------------------------------------------------------------------------------------------------
 */
namespace Decoded {
namespace Message {
/**
 * ------------------------------------------------------------------------------------------------
 * Directory Connector
 * ------------------------------------------------------------------------------------------------
 */
class SODirConnector : public SOutputConnector {
public:
    /**
     * ------------------------------------------------------------------------
     * Constructor
     * ------------------------------------------------------------------------
     */
    SODirConnector(const SText address);
protected:
    /**
	 * ------------------------------------------------------------------------
	 * IO functions
	 * ------------------------------------------------------------------------
	 * write
     * ----------------------------------------------------
	 */
    void _write(const Document& container) override;
    /**
	 * ------------------------------------------------------------------------
	 * control functions
	 * ------------------------------------------------------------------------
	 * Open
     * ----------------------------------------------------
	 */
    inline void _open() override {
        __dir = SODirectoryResource(__uri, 1);
    }
    /**
     * ----------------------------------------------------
     * Good
     * ----------------------------------------------------
     */
    inline bool _good() override {
        return __dir.good();
    }
    /**
     * ----------------------------------------------------
     * Close
     * ----------------------------------------------------
     */
    inline void _close() override {
        __dir = SODirectoryResource();
    }
private:
    /**
     * ------------------------------------------------------------------------
     * Variables
     * ------------------------------------------------------------------------
     **
     * resource 
     */
    SODirectoryResource __dir;
    /**
     * buffer
     */
    Buffer __buffer;
    /**
     * path
     */
    Frame __path;
    /**
     * file size
     */
    filesize_t __size;
    /**
     * file resource
     */
    SOFileResource __res;
};
/**
 * ------------------------------------------------------------------------------------------------
 * End namespace Decoded
 * ------------------------------------------------------------------------------------------------
 */
}}
#endif /* SODIRSTREAMSOCKET_H */

